\documentclass[11pt]{article}

%PRéAMBULE
\usepackage[french]{babel}
\usepackage[utf8]{inputenc}
\usepackage[table]{xcolor}
\usepackage[T1]{fontenc}
\usepackage[normalem]{ulem}
\usepackage{verbatim}
\usepackage{xcolor}
\usepackage{graphicx}
\usepackage{graphics}
\usepackage{fancybox}
\usepackage{amsfonts}
\usepackage{xcolor}
\usepackage{amsmath}
\usepackage{ulem}
\usepackage{adjustbox}
\usepackage{amssymb,amsmath,latexsym}
\usepackage{mathrsfs}
\usepackage[a4paper]{geometry}
\usepackage{subfig}
\usepackage[bottom]{footmisc}
%%\usepackage{mathpazo}

\usepackage{algorithmeUTF8}



%TITRE
\geometry{hscale=0.8,vscale=0.8,centering}
\title{Projet Othello - \textsc{La conception détaillée}}
\author{Groupe 1.5}
\date{\today}

\begin{document}
\maketitle
\noindent\rule{\textwidth}{1.3pt}

\renewcommand{\tt}[1]{\og \texttt{#1} \fg}

\part{Conception détaillée des TAD}

\section{Conception détaillée des types}

\subsection{CD du type \tt{Couleur}}
\begin{itemize}
\type{Couleur}{\{blanc, noir\}} 
\end{itemize}

\subsection{CD du type \tt{Pion}}
\begin{itemize}\item
\begin{algorithme}
\begin{enregistrement}{Pion}
\champEnregistrement{couleur}{Couleur}
\end{enregistrement}
\end{algorithme} 
% Est-ce utile de faire un enregistrement juste pour ça ? 
\end{itemize}

\subsection{CD du type \tt{Position}}
\begin{itemize}
\item
\begin{algorithme}
\begin{enregistrement}{Position}
\champEnregistrement{ligne}{\naturel}
\champEnregistrement{colonne}{\naturel}
\end{enregistrement}
\end{algorithme} 
\end{itemize}

\subsection{CD du type \tt{Plateau}}
\begin{itemize}\type{Case}{\{blanc, noir, vide\}}
\type{Plateau}{\tableauDeuxDimensions{1..8}{1..8}{de}{Case}}
% Pas terrible mais pas d'autre idées
\end{itemize}

\subsection{CD du type \tt{Coup}}
\begin{itemize}\item
\begin{algorithme}
\begin{enregistrement}{Coup}
\champEnregistrement{position}{Position}
\champEnregistrement{pion}{Pion}
\end{enregistrement}
\end{algorithme} 
\end{itemize}

\subsection{CD du type \tt{Coups}}
\begin{itemize}\item
\begin{algorithme}
\begin{enregistrement}{Coups}
\champEnregistrement{listeDesCoups}{Liste<Coup>}
\end{enregistrement}
\end{algorithme}
\end{itemize}

\section{Conception détaillée des opérations des TAD}

\part{Conception détaillée des algorithmes compliqués de l'analyse \tt{faireUnePartie}}
\setcounter{section}{0}
\section{La procédure \tt{jouer}}
\begin{algorithme}
	\procedure{jouer}
	{\paramEntreeSortie{plateau : Plateau}, \paramEntree{coupJouer : getCoup}, \paramSortie{aPuJouer : \booleen}}
	{i : \naturel \\
	coups : Coups \\
	joueurCourant : Couleur \\
	res : \booleen}
	{
	\affecter{joueurCourant}{obtenirCouleurPion(obtenirPionCoup(coupJoueur))}
	\affecter{coups}{listeCoupsPossibles(plateau, joueurCourant)}
	\pour{i}{1}{nbCoups(coups)}{}{
		\sialorssinon{iemeCoup(coups,i) $=$ coup}
		{	\affecter{res}{VRAI}
			\instruction{jouerCoup(coupJoueur,plateau)}
		}
		{\affecter{res}{FAUX}
		} %FinSi
	} %FinPour
	\affecter{aPuJouer}{res}
	
	}
\end{algorithme}

\section{La procédure \tt{jouerCoup}}
\begin{algorithme}
	\procedure{jouerCoup}
	{\paramEntree{coup : Coup}, \paramEntreeSortie{plateau : Plateau}}
	{i : \naturelNonNul \\
	pas : \entier}
	{
		\instruction{poserPion(plateau, obtenirPositionCoup(coup), obtenirPionCoup(coup))}
		\pour{i}{1}{3}{2}{
			\affecter{pas}{i $-$ 2}
			\instruction{inverserLigne(pas, obtenirPositionCoup(coup), obtenirPionCoup(coup), plateau)}
			\instruction{inverserColonne(pas, obtenirPositionCoup(coup), obtenirPionCoup(coup), plateau)}
			\instruction{inverserDiagMontante(pas, obtenirPositionCoup(coup), obtenirPionCoup(coup), plateau)}
			\instruction{inverserDiagDescendante(pas, obtenirPositionCoup(coup), obtenirPionCoup(coup), plateau)}
		}%FinPour
	}
\end{algorithme}


\section{La procédure \tt{inverserColonne}}
\begin{algorithme}
	\procedure{inverserColonne}
	{\paramEntree{pas : \entier, pos : Position, pionJoueur : Pion}, \paramEntreeSortie{plateau : Plateau}}
	{i, j, k, l : \naturelNonNul \\
	test : \booleen}
	{
		\affecter{i}{obtenirLigne(pos)}
		\affecter{j}{obtenirColonne(pos)}
		\affecter{k}{2 $+$ pas}
		\affecter{test}{FAUX}
		\tantque{((k $ > $ 0) et (k $\leqslant $ 8) et (test $ = $ FAUX) et non(estCaseVide(plateau, fixerPosition(k,j))))}{
			\sialorssinon{obtenirPion(plateau, fixerPosition(k,j)) = pionJoueur}
			{\affecter{test}{VRAI}}
			{\affecter{k}{k $+$ pas}}%FinSi		
		} %FinTantQue
		\sialors{test}{
			\pour{l}{k $-$ pas}{i $+$ pas}{}{
			\instruction{inverserPion(plateau, fixerPosition(l,j))}
			}%FinPour
		}%FinSi
	}
\end{algorithme}

\section{La procédure \tt{faireUnePartie}}
\begin{algorithme}
	\procedure{faireUnePartie}
	{\paramEntree{afficher : afficherPlateau, coupJoueur1, coupJoueur2 : getCoup}, \paramSortie{joueur : Couleur, estMatchNul : \booleen}}
	{plateau : Plateau \\
	aPuJouerJoueur1, aPuJouerJoueur2, estFinie : \booleen\\
	nbPionsBlancs, nbPionsNoirs : \naturel}
	{
		\affecter{aPuJouerJoueur1}{VRAI}
		\affecter{aPuJouerJoueur2}{VRAI}
		\affecter{estFinie}{VRAI}
		\affecter{nbPionsBlancs}{2}
		\affecter{nbPionsNoirs}{2}
		\affecter{plateau}{initialiserPlateau()}
		\instruction{finPartie(aPuJouerJoueur1, aPuJouerJoueur2, plateau, estFinie, nbPionsBlancs, nbPionsNoirs)}
		\instruction{afficher(plateau)}
		\tantque{non(estFinie)}{
			\instruction{jouer(coupJoueur1, plateau, aPuJouerJoueur1)}
			\instruction{afficher(plateau)}		
			\instruction{jouer(coupJoueur2, plateau, aPuJouerJoueur2)}
			\instruction{afficher(plateau)}		
			\instruction{finPartie(aPuJouerJoueur1, aPuJouerJoueur2, plateau, estFinie, nbPionsBlancs, nbPionsNoirs)}
		}%FinTantQue
		\sialorssinon{nbPionsBlancs $=$ nbPionsNoirs}
		{\affecter{joueur}{blanc()}
		\affecter{estMatchNul}{VRAI}}
		{\affecter{estMatchNul}{FAUX}
			\sialorssinon{nbPionsBlancs $ > $ nbPionsNoirs}
			{\affecter{joueur}{blanc()}}
			{\affecter{joueur}{noir()}}%FinSi
		}%FinSi
	}
\end{algorithme}

\part{Conception détaillée des algorithmes compliqués de l'analyse \tt{obtenirCoupIA}}
\setcounter{section}{0}
\section{La fonction \tt{obtenirCoupIA}}
\begin{algorithme}
	\fonction
	{obtenirCoupIA}
	{plateau : Plateau, couleur : Couleur}
	{Coup}{i, pronfondeurMinMax : \naturel \\
	coupsPossibles : Coups \\
	scoreCourant, meilleurScore : \entier\\
	coupCourant, meilleurCoup : Coup}
	{
	\affecter{profondeurMinMax}{profondeur()}
	\affecter{coupsPossibles}{listeCoupsPossibles(plateau,couleur)}
	\sialors{nbCoups(coupsPossibles) $>$ 0}
		{
			\affecter{meilleurCoup}{iemeCoup(coupsPossibles,1)}
			\affecter{meilleurScore}{scoreDUnCoup(plateau,meilleurCoup,couleur)}
			\pour{i}{2}{nbCoups(coupsPossibles}{}{
				\affecter{coupCourant}{iemeCoup(coupsPossibles,i)}
				\affecter{scoreCourant}{scoreDUnCoup(plateau,coupCourant,couleur)}
				\sialors{scoreCourant $>$ meilleurScore}{
					\affecter{meilleurCoup}{coupCourant}
					\affecter{meilleurScore}{scoreCourant}
				} %FinSi
			} %FinPour		
		} %FinSi
	
	} 
\end{algorithme}

\end{document}